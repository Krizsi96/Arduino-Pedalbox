@startuml Sequence Diagram
  !define LIGHTORANGE
  !include style.puml
  skinparam actorStyle awesome
  skinparam SequenceBoxBorderColor #Blue

  actor SimRacer as "Sim Racer"

  box "Arduino Pedalbox"
  participant ConvertAD as "HX711"
  participant Signal
  participant Communication as "Communication"
  end box
  actor SimPC as "Sim PC"

  'sequences
  == Initialization ==
  Communication -> SimPC : start serial \ncommunication
  alt serial port not available
    group while [not available]
      SimPC --> Communication : not ok
      Communication -> SimRacer : error indication
      Communication -> SimPC : start serial \ncommunication
    end
  else serial port available
      SimPC --> Communication : ok
  end
  Communication -> SimRacer : communication OK indication

  Communication -> ConvertAD : start communication
  alt HX711 not available
    group while [no response]
      ...1 second later...
      Communication -> SimRacer : error indication
      Communication -> ConvertAD : start communication
    end
  else HX711 available
      ConvertAD --> Communication : ok
  end

  Communication -> SimRacer : communication OK indication

  == Braking ==
  Signal -> ConvertAD : get measurement
  alt 
    ConvertAD -> SimRacer : get force
    SimRacer --> ConvertAD : brake pedal force
    ConvertAD --> Signal : digital measurement
    Signal -> Communication : brake measurement
    Communication -> SimPC : brake input signal
    SimPC --> SimRacer : decceleration
  else
    ...1 second later...
    Signal -> SimRacer : error indication
  end

@enduml